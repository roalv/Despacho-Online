â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ğŸš¨ IMPORTANTE: CONFIGURAR STORAGE NO SUPABASE ğŸš¨              â•‘
â•‘                                                                    â•‘
â•‘  Os uploads de documentos estÃ£o falhando porque as polÃ­ticas      â•‘
â•‘  de seguranÃ§a (RLS) dos buckets precisam ser configuradas.        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ ERRO ATUAL:
"new row violates row-level security policy"

ğŸ“‹ SOLUÃ‡ÃƒO - PASSO A PASSO:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
OPÃ‡ÃƒO 1: CONFIGURAÃ‡ÃƒO RÃPIDA (Recomendado - 2 minutos)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£  Acesse: https://supabase.com/dashboard

2ï¸âƒ£  Selecione seu projeto: yxdufeiphenwlnnqbwji

3ï¸âƒ£  No menu lateral, clique em: "Storage"

4ï¸âƒ£  Clique no bucket "documentos-clientes"

5ï¸âƒ£  Clique na aba "Policies" (PolÃ­ticas)

6ï¸âƒ£  Clique em "+ New Policy"

7ï¸âƒ£  Selecione: "For full customization"

8ï¸âƒ£  Preencha:
    â€¢ Policy name: Allow all operations
    â€¢ Policy definition: Selecione "All" para INSERT, SELECT, UPDATE, DELETE
    â€¢ Target roles: public
    â€¢ USING expression: true
    â€¢ WITH CHECK expression: true

9ï¸âƒ£  Clique em "Save policy"

ğŸ” REPITA os passos 4-9 para o bucket "documentos-despachos"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
OPÃ‡ÃƒO 2: USANDO SQL (Mais rÃ¡pido se vocÃª preferir SQL)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£  Acesse: https://supabase.com/dashboard

2ï¸âƒ£  Selecione seu projeto: yxdufeiphenwlnnqbwji

3ï¸âƒ£  No menu lateral esquerdo, clique em: "SQL Editor"

4ï¸âƒ£  Clique no botÃ£o: "+ New Query"

5ï¸âƒ£  COPIE E COLE o conteÃºdo do arquivo: CONFIGURAR_STORAGE.sql

6ï¸âƒ£  Clique no botÃ£o verde "RUN" (ou pressione Ctrl+Enter)

7ï¸âƒ£  Aguarde aparecer "Success"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… VERIFICAR SE DEU CERTO:

ApÃ³s executar uma das opÃ§Ãµes acima:

1. Volte para a aplicaÃ§Ã£o: https://customs-portal-2.preview.emergentagent.com
2. FaÃ§a login
3. VÃ¡ em "Clientes" â†’ Clique no Ã­cone ğŸ‘ï¸ de um cliente
4. Clique em "Enviar Documento"
5. Selecione um arquivo (PDF, imagem, etc.)
6. VocÃª deve ver: âœ… "Documento enviado com sucesso!"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ IMPORTANTE:

Esta configuraÃ§Ã£o permite que QUALQUER pessoa faÃ§a upload para os buckets.
Isto Ã© adequado para um MVP/protÃ³tipo.

Para produÃ§Ã£o, vocÃª deveria implementar polÃ­ticas mais restritivas baseadas
em autenticaÃ§Ã£o de usuÃ¡rios.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  Se continuar com erro apÃ³s executar, me avise!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
